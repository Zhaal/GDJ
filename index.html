<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Gestion d'association de jeux de soci√©t√© - Stock, Ludoth√®que, √âv√©nements">
    <meta name="theme-color" content="#ffd700">

    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GDJ">

    <title>Les Gardiens du Jeu - Gestion</title>

    <!-- Manifest PWA -->
    <link rel="manifest" href="/manifest.json">

    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-16x16.png">

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Page de connexion -->
        <div id="loginPage" class="page active">
            <div class="container">
                <h1>Les Gardiens du Jeu</h1>
                <h2>Connexion</h2>
                <form id="loginForm">
                    <input type="text" id="loginPseudo" placeholder="Pseudo" required>
                    <input type="password" id="loginPassword" placeholder="Mot de passe" required>
                    <button type="submit">Se connecter</button>
                </form>
                <p>Pas encore de compte ? <a href="#" id="showRegister">S'inscrire</a></p>
            </div>
        </div>

        <!-- Page d'inscription -->
        <div id="registerPage" class="page">
            <div class="container">
                <h1>Les Gardiens du Jeu</h1>
                <h2>Inscription</h2>
                <form id="registerForm">
                    <input type="text" id="registerPseudo" placeholder="Pseudo (login)" required>
                    <input type="text" id="registerNom" placeholder="Nom" required>
                    <input type="text" id="registerPrenom" placeholder="Pr√©nom" required>
                    <input type="email" id="registerEmail" placeholder="Email (optionnel)">
                    <input type="password" id="registerPassword" placeholder="Mot de passe" required>
                    <input type="password" id="registerPasswordConfirm" placeholder="Confirmer le mot de passe" required>
                    <button type="submit">S'inscrire</button>
                </form>
                <p>D√©j√† un compte ? <a href="#" id="showLogin">Se connecter</a></p>
            </div>
        </div>

        <!-- Page d'administration -->
        <div id="adminPage" class="page">
            <nav class="navbar">
                <h1>Les Gardiens du Jeu - Administration</h1>
                <div>
                    <button id="soumissionsAdminBtn" class="btn-secondary" onclick="afficherSoumissionsEnAttente()" style="margin-right: 10px; position: relative;">
                        Soumissions
                        <span id="soumissionsBadgeBtn" style="display: none; position: absolute; top: -8px; right: -8px; background: #e74c3c; color: white; border-radius: 50%; width: 24px; height: 24px; font-size: 12px; font-weight: bold; line-height: 24px; text-align: center;"></span>
                    </button>
                    <button class="btn-secondary" onclick="ouvrirParametresAdmin()" style="margin-right: 10px;">‚öôÔ∏è</button>
                    <span id="adminUserInfo"></span>
                    <button id="logoutBtn">D√©connexion</button>
                </div>
            </nav>

            <div class="container">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="produits">Produits</button>
                    <button class="tab-btn" data-tab="ludotheque">Ludoth√®que</button>
                    <button class="tab-btn" data-tab="ludotheque-membres">Ludo par membre</button>
                    <button class="tab-btn" data-tab="membres">Membres</button>
                    <button class="tab-btn" data-tab="adhesions">Adh√©sions</button>
                    <button class="tab-btn" data-tab="calendrier">Calendrier</button>
                    <button class="tab-btn" data-tab="annonces-admin">Annonces</button>
                    <button class="tab-btn" data-tab="export">Export</button>
                </div>

                <!-- Onglet Produits -->
                <div id="produitsTab" class="tab-content active">
                    <div class="section-header">
                        <h2>Gestion des Produits</h2>
                        <button id="addProductBtn" class="btn-primary">Ajouter un produit</button>
                    </div>

                    <div id="productForm" class="form-container" style="display: none;">
                        <h3 id="formTitle">Ajouter un produit</h3>
                        <form id="productFormElement">
                            <input type="hidden" id="productId">
                            <input type="text" id="productNom" placeholder="Nom du produit" required>
                            <input type="number" step="0.01" id="productPrix" placeholder="Prix (‚Ç¨)" required>
                            <input type="number" id="productStock" placeholder="Stock" required>
                            <select id="productCategorie" required>
                                <option value="">S√©lectionner une cat√©gorie</option>
                                <option value="Chocolat">Chocolat</option>
                                <option value="Boisson">Boisson</option>
                                <option value="Snack">Snack</option>
                                <option value="Autre">Autre</option>
                            </select>
                            <div class="form-actions">
                                <button type="submit" class="btn-primary">Enregistrer</button>
                                <button type="button" id="cancelProductBtn" class="btn-secondary">Annuler</button>
                            </div>
                        </form>
                    </div>

                    <div class="table-scroll">
                        <table id="productsTable">
                            <thead>
                                <tr>
                                    <th>Nom</th>
                                    <th>Cat√©gorie</th>
                                    <th>Prix</th>
                                    <th>Stock</th>
                                    <th>Date d'ajout</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Onglet Ludoth√®que -->
                <div id="ludothequeTab" class="tab-content">
                    <div class="section-header">
                        <h2>Ludoth√®que</h2>
                        <button id="addGameBtn" class="btn-primary">Ajouter un jeu</button>
                    </div>

                    <div id="gameForm" class="form-container" style="display: none;">
                        <h3 id="gameFormTitle">Ajouter un jeu</h3>
                        <form id="gameFormElement">
                            <input type="hidden" id="gameId">
                            <input type="text" id="gameNom" placeholder="Nom du jeu" required>
                            <input type="text" id="gameProprietaire" placeholder="Propri√©taire" required>
                            <input type="number" id="gameMinJoueurs" placeholder="Min joueurs" required>
                            <input type="number" id="gameMaxJoueurs" placeholder="Max joueurs" required>
                            <input type="number" id="gameDuree" placeholder="Dur√©e (min)" required>
                            <input type="number" id="gameAge" placeholder="√Çge minimum" required>
                            <textarea id="gameDescription" placeholder="Description" rows="3"></textarea>
                            <div class="form-actions">
                                <button type="submit" class="btn-primary">Enregistrer</button>
                                <button type="button" id="cancelGameBtn" class="btn-secondary">Annuler</button>
                            </div>
                        </form>
                    </div>

                    <!-- Barre de recherche et filtres -->
                    <div style="margin-bottom: 20px;">
                        <input type="text" id="searchLudo" placeholder="üîç Rechercher un jeu..." style="width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid rgba(255, 215, 0, 0.3); background: rgba(0, 0, 0, 0.3); color: #ffffff; border-radius: 8px;">

                        <div class="tabs" style="margin-bottom: 15px;">
                            <button class="tab-btn active" data-duree="all">Tous</button>
                            <button class="tab-btn" data-duree="10">‚â§ 10 min</button>
                            <button class="tab-btn" data-duree="30">‚â§ 30 min</button>
                            <button class="tab-btn" data-duree="60">‚â§ 60 min</button>
                            <button class="tab-btn" data-duree="120">‚â§ 120 min</button>
                            <button class="tab-btn" data-duree="240">‚â§ 240 min</button>
                            <button class="tab-btn" data-duree="240+">240+ min</button>
                        </div>
                    </div>

                    <div id="ludothequeList"></div>
                </div>

                <!-- Onglet Ludoth√®que par membre -->
                <div id="ludotheque-membresTab" class="tab-content">
                    <h2>Ludoth√®que par membre</h2>
                    <p style="color:#fff;margin-bottom:20px;">S√©lectionnez un membre pour voir ses jeux</p>

                    <div style="margin-bottom: 20px;">
                        <select id="membreFilterLudo" style="width: 100%; max-width: 400px; padding: 12px; border: 2px solid rgba(255, 215, 0, 0.3); background: rgba(0, 0, 0, 0.3); color: #ffffff; border-radius: 8px;">
                            <option value="">-- S√©lectionner un membre --</option>
                        </select>
                    </div>

                    <div id="ludothequeByMembreList"></div>
                </div>

                <!-- Onglet Membres -->
                <div id="membresTab" class="tab-content">
                    <h2>Liste des Membres</h2>
                    <p style="color:#e0e0e0;margin-bottom:20px;">Cliquez sur un membre pour voir les d√©tails</p>
                    <div class="table-scroll">
                        <table id="membersTable">
                            <thead>
                                <tr>
                                    <th>Pseudo</th>
                                    <th>Nom</th>
                                    <th>Pr√©nom</th>
                                    <th>Email</th>
                                    <th>Statut</th>
                                    <th>Ardoise</th>
                                    <th>Date d'inscription</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="membersTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Onglet Adh√©sions -->
                <div id="adhesionsTab" class="tab-content">
                    <h2>Gestion des Adh√©sions</h2>
                    <div class="table-scroll">
                        <table>
                            <thead>
                                <tr>
                                    <th>Pseudo</th>
                                    <th>Membre</th>
                                    <th>Email</th>
                                    <th>Statut</th>
                                    <th>D√©but</th>
                                    <th>Fin</th>
                                    <th>Montant</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="adhesionsTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Onglet Calendrier -->
                <div id="calendrierTab" class="tab-content">
                    <div class="section-header">
                        <h2>Calendrier des √âv√©nements</h2>
                        <button class="btn-primary" onclick="ajouterEvenement()">Nouvel √©v√©nement</button>
                    </div>
                    <div id="calendarContainer"></div>
                </div>

                <!-- Onglet Annonces Admin -->
                <div id="annonces-adminTab" class="tab-content">
                    <div class="section-header">
                        <h2>Annonces</h2>
                        <button id="addAnnonceBtn" class="btn-primary">Nouvelle annonce</button>
                    </div>

                    <div id="annonceForm" class="form-container" style="display: none;">
                        <h3>Nouvelle annonce</h3>
                        <form id="annonceFormElement">
                            <input type="text" id="annonceTitre" placeholder="Titre" required>
                            <textarea id="annonceContenu" placeholder="Contenu de l'annonce" rows="5" required></textarea>

                            <div style="margin: 15px 0;">
                                <label style="display: block; margin-bottom: 10px; color: #ffd700; font-weight: 600;">Type d'annonce :</label>
                                <div style="display: flex; gap: 20px;">
                                    <label style="display: flex; align-items: center; gap: 8px; color: #e0e0e0; cursor: pointer;">
                                        <input type="radio" name="annonceType" value="permanente" checked onchange="toggleAnnonceExpiration()">
                                        <span>üìå Permanente</span>
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; color: #e0e0e0; cursor: pointer;">
                                        <input type="radio" name="annonceType" value="temporaire" onchange="toggleAnnonceExpiration()">
                                        <span>‚è∞ Temporaire</span>
                                    </label>
                                </div>
                            </div>

                            <div id="annonceExpirationDiv" style="display: none; margin: 15px 0;">
                                <label for="annonceExpiration" style="display: block; margin-bottom: 5px; color: #ffd700;">Date d'expiration :</label>
                                <input type="date" id="annonceExpiration" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid rgba(255, 215, 0, 0.3); background: rgba(255, 255, 255, 0.1); color: #fff;">
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn-primary">Publier</button>
                                <button type="button" id="cancelAnnonceBtn" class="btn-secondary">Annuler</button>
                            </div>
                        </form>
                    </div>

                    <div id="annoncesList"></div>
                </div>

                <!-- Onglet Export -->
                <div id="exportTab" class="tab-content">
                    <h2>Tableau de Bord et Exports</h2>

                    <!-- Statistiques globales -->
                    <div class="stats-grid" style="margin-bottom: 30px;">
                        <div class="stat-card">
                            <h3>Total membres</h3>
                            <p class="stat-value" id="statTotalMembres">0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Transactions ce mois</h3>
                            <p class="stat-value" id="statTransactionsMois">0</p>
                        </div>
                        <div class="stat-card">
                            <h3>CA ce mois</h3>
                            <p class="stat-value" id="statCA">0 ‚Ç¨</p>
                        </div>
                        <div class="stat-card">
                            <h3>Ardoises totales</h3>
                            <p class="stat-value" id="statArdoises">0 ‚Ç¨</p>
                        </div>
                    </div>

                    <!-- D√©tails de la caisse -->
                    <div class="form-container" style="margin-bottom: 30px;">
                        <h3>üìä D√©tails de la Caisse</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                            <div>
                                <div class="info-label">Caisse r√©elle (pay√©)</div>
                                <div class="info-value" style="font-size: 20px; color: #4ade80;" id="caisseReelle">0.00 ‚Ç¨</div>
                            </div>
                            <div>
                                <div class="info-label">Ardoises (en attente)</div>
                                <div class="info-value" style="font-size: 20px; color: #fbbf24;" id="caisseArdoise">0.00 ‚Ç¨</div>
                            </div>
                            <div>
                                <div class="info-label">Total cotisations</div>
                                <div class="info-value" style="font-size: 20px; color: #60a5fa;" id="totalCotisations">0.00 ‚Ç¨</div>
                            </div>
                            <div>
                                <div class="info-label">Caisse totale</div>
                                <div class="info-value" style="font-size: 20px; color: #a78bfa; font-weight: bold;" id="caisseTotal">0.00 ‚Ç¨</div>
                            </div>
                        </div>
                    </div>

                    <!-- R√©capitulatif des flux financiers -->
                    <div class="form-container" style="margin-bottom: 30px;">
                        <h3>üíµ R√©capitulatif des flux financiers (ann√©e en cours)</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                            <!-- Entr√©es -->
                            <div style="background: rgba(46, 204, 113, 0.1); padding: 15px; border-radius: 8px; border: 2px solid rgba(46, 204, 113, 0.3);">
                                <h4 style="color: #2ecc71; margin-bottom: 10px;">üì• Entr√©es d'argent</h4>
                                <div style="display: flex; justify-content: space-between; margin: 8px 0; color: #e0e0e0;">
                                    <span>Ventes produits:</span>
                                    <strong id="totalVentes">0.00 ‚Ç¨</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin: 8px 0; color: #e0e0e0;">
                                    <span>Cotisations:</span>
                                    <strong id="totalCotisationsAnnee">0.00 ‚Ç¨</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin: 8px 0; color: #e0e0e0;">
                                    <span>Dons & subventions:</span>
                                    <strong id="totalFondsAnnee">0.00 ‚Ç¨</strong>
                                </div>
                                <hr style="border-color: rgba(46, 204, 113, 0.3); margin: 12px 0;">
                                <div style="display: flex; justify-content: space-between; font-size: 18px; color: #2ecc71;">
                                    <strong>Total entr√©es:</strong>
                                    <strong id="totalEntrees">0.00 ‚Ç¨</strong>
                                </div>
                            </div>

                            <!-- Sorties -->
                            <div style="background: rgba(231, 76, 60, 0.1); padding: 15px; border-radius: 8px; border: 2px solid rgba(231, 76, 60, 0.3);">
                                <h4 style="color: #e74c3c; margin-bottom: 10px;">üì§ Sorties d'argent</h4>
                                <div style="display: flex; justify-content: space-between; margin: 8px 0; color: #e0e0e0;">
                                    <span>R√©approvisionnements:</span>
                                    <strong id="totalReapprosAnnee">0.00 ‚Ç¨</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin: 8px 0; color: #e0e0e0;">
                                    <span>Achats divers:</span>
                                    <strong id="totalAchatsDiversAnnee">0.00 ‚Ç¨</strong>
                                </div>
                                <hr style="border-color: rgba(231, 76, 60, 0.3); margin: 12px 0;">
                                <div style="display: flex; justify-content: space-between; font-size: 18px; color: #e74c3c;">
                                    <strong>Total sorties:</strong>
                                    <strong id="totalSorties">0.00 ‚Ç¨</strong>
                                </div>
                            </div>
                        </div>

                        <!-- Bilan -->
                        <div style="margin-top: 20px; padding: 20px; background: rgba(155, 89, 182, 0.1); border-radius: 8px; border: 2px solid rgba(155, 89, 182, 0.3); text-align: center;">
                            <h4 style="color: #9b59b6; margin-bottom: 10px;">üí∞ Bilan de l'ann√©e</h4>
                            <div style="font-size: 24px; font-weight: bold;">
                                <span style="color: #e0e0e0;">R√©sultat: </span>
                                <span id="bilanAnnee" style="color: #9b59b6;">0.00 ‚Ç¨</span>
                            </div>
                        </div>
                    </div>

                    <!-- Graphiques -->
                    <div class="form-container" style="margin-bottom: 30px;">
                        <h3>üìà Visualisations</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                            <div>
                                <h4 style="text-align: center; margin-bottom: 15px; color: #ffd700;">Ventes par cat√©gorie</h4>
                                <canvas id="chartCategories" style="max-height: 250px;"></canvas>
                            </div>
                            <div>
                                <h4 style="text-align: center; margin-bottom: 15px; color: #ffd700;">Modes de paiement</h4>
                                <canvas id="chartPaiements" style="max-height: 250px;"></canvas>
                            </div>
                            <div>
                                <h4 style="text-align: center; margin-bottom: 15px; color: #ffd700;">Adh√©sions par mois</h4>
                                <canvas id="chartAdhesions" style="max-height: 250px;"></canvas>
                            </div>
                            <div>
                                <h4 style="text-align: center; margin-bottom: 15px; color: #ffd700;">√âvolution de la caisse</h4>
                                <canvas id="chartCaisse" style="max-height: 250px;"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Transactions d√©taill√©es -->
                    <div class="form-container" style="margin-bottom: 30px;">
                        <div class="section-header">
                            <h3>üìã Transactions r√©centes</h3>
                            <div>
                                <select id="filterPeriod" style="padding: 8px; border-radius: 5px; border: 1px solid #ddd;">
                                    <option value="mois">Ce mois</option>
                                    <option value="semaine">Cette semaine</option>
                                    <option value="jour">Aujourd'hui</option>
                                    <option value="tout">Tout</option>
                                </select>
                            </div>
                        </div>
                        <div class="table-scroll">
                            <table id="transactionsTable">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Membre</th>
                                        <th>Produits</th>
                                        <th>Montant</th>
                                        <th>Paiement</th>
                                        <th>Statut</th>
                                    </tr>
                                </thead>
                                <tbody id="transactionsTableBody"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- R√©approvisionnements -->
                    <div class="form-container" style="margin-bottom: 30px;">
                        <div class="section-header">
                            <h3>üì¶ Historique des r√©approvisionnements</h3>
                            <button class="btn-primary" onclick="ajouterReapprovisionnement()">Ajouter un r√©appro</button>
                        </div>
                        <div class="table-scroll">
                            <table id="reapprosTable">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Produit</th>
                                        <th>Quantit√©</th>
                                        <th>Co√ªt du pack</th>
                                        <th>Co√ªt total</th>
                                        <th>Note</th>
                                    </tr>
                                </thead>
                                <tbody id="reapprosTableBody"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Achats divers -->
                    <div class="form-container" style="margin-bottom: 30px;">
                        <div class="section-header">
                            <h3>üõí Achats divers (mat√©riel, √©quipement)</h3>
                            <button class="btn-primary" onclick="ajouterAchatDivers()">Ajouter un achat</button>
                        </div>
                        <div class="table-scroll">
                            <table id="achatsDiversTable">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Article</th>
                                        <th>Montant</th>
                                        <th>Note</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="achatsDiversTableBody"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Ajouts de fonds -->
                    <div class="form-container" style="margin-bottom: 30px;">
                        <div class="section-header">
                            <h3>üí∞ Ajouts de fonds (dons, subventions, etc.)</h3>
                            <button class="btn-primary" onclick="ajouterFonds()">Ajouter des fonds</button>
                        </div>
                        <div class="table-scroll">
                            <table id="fondsTable">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Montant</th>
                                        <th>Provenance</th>
                                        <th>Note</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="fondsTableBody"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Export -->
                    <div class="form-container">
                        <h3>üíæ Exporter les donn√©es</h3>
                        <p>Exporte toutes les donn√©es dans un fichier Excel avec des onglets s√©par√©s : Mois d√©taill√©s, Membres, Transactions, Adh√©sions, Ludoth√®que, D√©penses, √âv√©nements et Statistiques.</p>
                        <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 15px;">
                            <button class="btn-primary" onclick="afficherDialogueExport()" style="font-size: 18px; padding: 15px;">üìä Export Complet</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page membre -->
        <div id="memberPage" class="page">
            <nav class="navbar">
                <h1>Les Gardiens du Jeu</h1>
                <div>
                    <button id="soumissionsMembreBtn" class="btn-secondary" onclick="afficherSoumissionsEnAttente()" style="margin-right: 10px; position: relative; display: none;">
                        Soumissions
                        <span id="soumissionsBadgeMembreBtn" style="display: none; position: absolute; top: -8px; right: -8px; background: #e74c3c; color: white; border-radius: 50%; width: 24px; height: 24px; font-size: 12px; font-weight: bold; line-height: 24px; text-align: center;"></span>
                    </button>
                    <button class="btn-secondary" onclick="ouvrirParametresMembre()" style="margin-right: 10px;">‚öôÔ∏è</button>
                    <span id="memberUserInfo"></span>
                    <button id="logoutMemberBtn">D√©connexion</button>
                </div>
            </nav>

            <div class="container">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="shopping">Acheter</button>
                    <button class="tab-btn" data-tab="history">Historique</button>
                    <button class="tab-btn" data-tab="ludotheque-view">Ludoth√®que</button>
                    <button class="tab-btn" data-tab="calendrier-view">Calendrier</button>
                    <button class="tab-btn" data-tab="annonces-view">Annonces</button>
                </div>

                <!-- Onglet Acheter -->
                <div id="shoppingTab" class="tab-content active">
                    <h2>S√©lectionner des produits</h2>

                    <!-- Filtres par cat√©gorie -->
                    <div class="tabs" style="margin-bottom: 15px;">
                        <button class="tab-btn active" data-categorie="all">Tous</button>
                        <button class="tab-btn" data-categorie="Chocolat">üç´ Chocolat</button>
                        <button class="tab-btn" data-categorie="Boisson">ü•§ Boisson</button>
                        <button class="tab-btn" data-categorie="Snack">üçø Snack</button>
                    </div>

                    <div id="productsList" class="products-grid"></div>

                    <div class="cart-summary">
                        <h3>Panier</h3>
                        <div id="cartItems"></div>
                        <div class="cart-total">
                            <strong>Total: <span id="cartTotal">0.00</span> ‚Ç¨</strong>
                        </div>
                        <div class="payment-method">
                            <label>Mode de paiement:</label>
                            <select id="paymentMethod">
                                <option value="especes">Esp√®ces</option>
                                <option value="paypal">PayPal</option>
                                <option value="ardoise">Ardoise (payer plus tard)</option>
                            </select>
                        </div>
                        <button id="validateOrderBtn" class="btn-primary btn-large">Valider la commande</button>
                    </div>
                </div>

                <!-- Onglet Historique -->
                <div id="historyTab" class="tab-content">
                    <h2>Mon historique</h2>
                    <div class="user-stats">
                        <div class="stat-card" id="ardoiseCard" style="cursor: pointer;" onclick="payerArdoise()">
                            <h3>Ardoise actuelle</h3>
                            <p class="stat-value" id="userArdoise">0.00 ‚Ç¨</p>
                            <p style="font-size: 12px; color: #ffd700; margin-top: 5px;">üí≥ Cliquez pour payer</p>
                        </div>
                        <div class="stat-card" id="adhesionStatusCard">
                            <h3>Adh√©sion</h3>
                            <p class="stat-value" id="adhesionStatus" style="font-size: 16px;">-</p>
                            <p id="adhesionDetails" style="font-size: 12px; color: #e0e0e0; margin-top: 5px;"></p>
                        </div>
                    </div>
                    <div class="table-scroll">
                        <table id="historyTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Produits</th>
                                    <th>Montant</th>
                                    <th>Paiement</th>
                                    <th>Statut</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Onglet Ludoth√®que (vue membre) -->
                <div id="ludotheque-viewTab" class="tab-content">
                    <div class="section-header">
                        <h2>Ludoth√®que de l'association</h2>
                        <div>
                            <button class="btn-primary" onclick="soumettreJeu()">Proposer un jeu</button>
                            <button class="btn-secondary" onclick="voirMesSoumissions()">Mes soumissions</button>
                        </div>
                    </div>

                    <!-- Barre de recherche et filtres -->
                    <div style="margin-bottom: 20px;">
                        <input type="text" id="searchLudoMembre" placeholder="üîç Rechercher un jeu..." style="width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid rgba(255, 215, 0, 0.3); background: rgba(0, 0, 0, 0.3); color: #ffffff; border-radius: 8px;">

                        <div class="tabs" style="margin-bottom: 15px;">
                            <button class="tab-btn active" data-duree="all">Tous</button>
                            <button class="tab-btn" data-duree="10">‚â§ 10 min</button>
                            <button class="tab-btn" data-duree="30">‚â§ 30 min</button>
                            <button class="tab-btn" data-duree="60">‚â§ 60 min</button>
                            <button class="tab-btn" data-duree="120">‚â§ 120 min</button>
                            <button class="tab-btn" data-duree="240">‚â§ 240 min</button>
                            <button class="tab-btn" data-duree="240+">240+ min</button>
                        </div>

                        <!-- S√©lecteur de membre -->
                        <div style="margin-top: 15px;">
                            <select id="membreFilterLudoMembre" style="width: 100%; max-width: 400px; padding: 12px; border: 2px solid rgba(255, 215, 0, 0.3); background: rgba(0, 0, 0, 0.3); color: #ffffff; border-radius: 8px;">
                                <option value="">Tous les jeux</option>
                            </select>
                        </div>
                    </div>

                    <div id="ludothequeListMembre"></div>
                </div>

                <!-- Onglet Calendrier (vue membre) -->
                <div id="calendrier-viewTab" class="tab-content">
                    <div class="section-header">
                        <h2>√âv√©nements et Inscriptions</h2>
                        <div>
                            <button class="btn-primary" onclick="soumettrEvenement()">Proposer un √©v√©nement</button>
                            <button class="btn-secondary" onclick="voirMesSoumissions()">Mes soumissions</button>
                        </div>
                    </div>

                    <!-- Sous-onglets pour √©v√©nements -->
                    <div style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #2c3e50;">
                        <button class="sub-tab-btn active" onclick="switchEventTab('upcoming')">üìÖ √Ä venir</button>
                        <button class="sub-tab-btn" onclick="switchEventTab('archives')">üì¶ Archives</button>
                    </div>

                    <!-- √âv√©nements √† venir -->
                    <div id="eventsUpcomingTab" class="event-sub-tab">
                        <div id="calendarContainerMembre"></div>
                    </div>

                    <!-- √âv√©nements archiv√©s -->
                    <div id="eventsArchivesTab" class="event-sub-tab" style="display: none;">
                        <div id="eventsArchivesList"></div>
                    </div>
                </div>

                <!-- Onglet Annonces (vue membre) -->
                <div id="annonces-viewTab" class="tab-content">
                    <h2>Annonces</h2>
                    <div id="annoncesListMembre"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <script src="dialogs.js"></script>
    <script src="session-manager.js"></script>
    <script src="offline-sync.js"></script>
    <script src="app.js"></script>
    <script src="settings.js"></script>
    <script src="sessions-ui.js"></script>
    <script src="bgg-integration.js"></script>
    <script src="extensions-manager.js"></script>
    <script src="categories-depenses.js"></script>
    <script src="depenses-stats.js"></script>
    <script src="rapport-ag-generator.js"></script>
    <script src="comparaison-annuelle.js"></script>
    <script src="export-manager.js"></script>
    <script src="description-utils.js"></script>
    <script src="admin-extended.js"></script>
    <script src="init-new-features.js"></script>
    <script src="dashboard.js"></script>
    <script src="soumissions.js"></script>
    <script src="soumission-jeu-bgg.js"></script>
    <script src="pwa.js"></script>
    <script src="mobile-ui.js"></script>
</body>
</html>
